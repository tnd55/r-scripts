---
title: "LinePlot_UV_HPLC_GC"
author: "Tuhin Das"
date: "`r Sys.Date()`"
output: html_document
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)
```

## R Markdown

This is an R Markdown document. Markdown is a simple formatting syntax for authoring HTML, PDF, and MS Word documents. For more details on using R Markdown see <http://rmarkdown.rstudio.com>.

When you click the **Knit** button a document will be generated that includes both content as well as the output of any embedded R code chunks within the document. You can embed an R code chunk like this:

## Loading packages
```{r, warning=FALSE, message=FALSE}
library(tidyverse)   # ggplot2, readr, dplyr, …
library(conflicted)  # optional—helps resolve naming clashes
library(patchwork)   # for multi-panel layouts (future use)
library(scales)      # nice axis-label helpers
```

## Helper function for scientific notation
```{r, warning=FALSE, message=FALSE}
sci_format <- function(x) {
  formatted <- scientific_format()(x)               # "1.6e+05"
  formatted[x == 0] <- "0"                          # keep exact zero as "0"
  parse(text = gsub("e\\+?", " %*% 10^", formatted))# convert to 1.6 × 10^5
}
```

## Publication quality theme
```{r, warning=FALSE, message=FALSE}
theme_pub <- function(base_size   = 14,
                      base_family = "Arial") {
  
  theme_minimal(base_size = base_size,
                base_family = base_family) +
    theme(
      
      # ★ Plot & panel backgrounds (blank = no grey fill)
      panel.background = element_blank(),
      plot.background  = element_blank(),
      
      # ★ Axis box & lines
      axis.line   = element_line(color = "black", linewidth = 1),
      # If you prefer a full rectangle border around the panel, uncomment ↓
      # panel.border = element_rect(color = "black", fill = NA, linewidth = 1),
      
      # ★ Tick marks
      axis.ticks        = element_line(color = "black", linewidth = 1),
      axis.ticks.length = unit(0.25, "cm"),  # tick length
      axis.ticks.direction = "out",          # point ticks outward
      
      # ★ Tick-label text (size & color)
      axis.text.x = element_text(color = "black", size = base_size),
      axis.text.y = element_text(color = "black", size = base_size),
      
      # ★ Remove grid lines for a clean look
      panel.grid.major = element_blank(),
      panel.grid.minor = element_blank(),
      
      # ★ Legend: inside plot, frameless, no title
      legend.position   = c(0.87, 0.85),     # (x, y) in [0,1] plot coords
      legend.background = element_blank(),
      legend.key        = element_blank(),
      legend.title      = element_blank(),
      legend.text       = element_text(size = base_size),
      
      # ★ Axis titles & plot title
      axis.title = element_text(size = base_size * 1.2),
      plot.title = element_text(size = base_size * 1.4, face = "bold")
    )
}
```

## Importing data
```{r, warning=FALSE, message=FALSE}
raw <- read_csv("data/MgQE_betaionone_chiral.csv")
```

## Including Plots

You can also embed plots, for example:

```{r, warning=FALSE, message=FALSE}
final <- ggplot(raw, aes(time, intensity, colour = type, group = type)) +
  geom_line(linewidth = 1) +                                   # data line
  labs(x = "Retention time (min)", y = "Intensity") +          # axis titles
  scale_x_continuous(                                          # X-axis
    limits = c(25, 40),
    expand = c(0, 0)                                           # no padding
  ) +
  scale_y_continuous(                                          # Y-axis
    limits  = c(0, 30000),
    breaks  = seq(0, 30000, by = 10000),                      # nice ticks
    expand  = c(0, 0),
    labels  = sci_format                                       
  ) +
  theme_pub()
```

## The plot
```{r, warning=FALSE, message=FALSE}
print(final)
```

## Exporting the plot for manuscript
```{r, warning=FALSE, message=FALSE}
dir.create("output", showWarnings = FALSE)
ggsave("output/MgQE_betaionone_chiral.pdf", plot = final, width = 6, height = 4, device = cairo_pdf)
```


